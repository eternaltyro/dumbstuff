---
- name: Install development essentials.
  ansible.legacy.package:
    name:
      - git
      - git-filter-repo
      - gitsign
      - cosign
      - ruff
    state: latest

- name: Install other development utilities.
  ansible.legacy.package:
    name:
      - toolbox
    state: latest

- name: Install virtualisation tools.
  ansible.legacy.package:
    name:
      - libvirt
      - libvirt-python
      - virt-install
      - virt-manager
      - qemu-base
      - qemu-system-x86
      - virtualbox
      - virtualbox-guest-iso
      - virtualbox-guest-utils
    state: latest

# slirp4ns and fuse-overlayfs are needed for rootless podman
# To set subuid / subgid for user namespaces inside container:
# sudo usermod --add-subuids 100000-165535 \
#              --add-subgids 100000-165535 <username>
- name: Install containerisation tools.
  ansible.legacy.package:
    name:
      - podman
      - podman-compose
      - buildah
      - skopeo
      - conmon
      - containers-common
      - fuse-overlayfs
      - slirp4netns
    state: latest

- name: Install infrastructure automation tools.
  ansible.legacy.package:
    name:
      - opentofu
      - terraform
    state: latest

- name: Install terragrunt terraform wrapper
  ansible.legacy.package:
    name:
      - terragrunt
    state: latest
  tags: [never, terragrunt]
